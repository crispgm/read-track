<h2 id="iOS">iOS</h2>
<p>Coming soon.</p>
<h2 id="Bookmarklet">Bookmarklet</h2>
<p>
  You may add the following bookmarklet to your browser. Chrome and Brave are
  tested. This is based on
  <a
    href="https://gist.github.com/codemicro/f7d4d4b687c3ec2e7186ef7efecfcc35"
    target="_blank"
    >https://gist.github.com/codemicro/f7d4d4b687c3ec2e7186ef7efecfcc35</a
  >.
</p>
<p>
  Read Type:
  <select>
    <option>Read</option>
    <option>Skim</option>
    <option>Skip</option>
  </select>
</p>
<p>
  Enable HTTPS: <input type="checkbox" checked />
</p>
<pre class="highlight">
  <code class="hljs">
javascript:(() => {
  const token = "{{ token }}";
  const requestURL = `{{ hostname }}/api/add`;
  const opType = "read";

  const pageTitle = document.title;
  const pageURL = window.location.href;
  let metaAuthor = "";
  let metaImage = "";
  let metaDescription = "";

  function getMetaValue(propName) {
    const x = document.getElementsByTagName("meta");
    for (let i = 0; i < x.length; i++) {
      const y = x[i];

      let metaName;
      if (y.attributes.property !== undefined) {
        metaName = y.attributes.property.value;
      }
      if (y.attributes.name !== undefined) {
        metaName = y.attributes.name.value;
      }

      if (metaName === undefined) {
        continue;
      }

      if (metaName === propName) {
        return y.attributes.content.value;
      }
    }
    return undefined;
  }

  {
    const author = getMetaValue("author");
    if (author !== undefined) {
      metaAuthor = author;
    }
  }

  {
    let desc = getMetaValue("og:description");
    if (desc !== undefined) {
      metaDescription = desc;
    } else {
      desc = getMetaValue("description");
      if (desc !== undefined) {
        metaDescription = desc;
      }
    }
  }

  {
    const img = getMetaValue("og:image");
    if (img !== undefined) {
      metaImage = img;
    }
  }

  const url = new URL(requestURL);
  const searchParams = url.searchParams;
  searchParams.set("title", pageTitle);
  searchParams.set("url", pageURL);
  searchParams.set("type", opType);
  searchParams.set("author", metaAuthor);
  searchParams.set("description", metaDescription);
  searchParams.set("image", metaImage);
  searchParams.set("token", token);

  window.location.href = url;
})();
  </code>
</pre>
